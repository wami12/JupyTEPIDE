<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <style>
        .KEYW {
            color: #933;
        }

        .COMM {
            color: #bbb;
            font-style: italic;
        }

        .NUMB {
            color: #393;
        }

        .STRN {
            color: #393;
        }

        .REGX {
            color: #339;
        }

        .line {
            border-right: 1px dotted #666;
            color: #666;
            font-style: normal;
        }
    </style>
</head>
<body>
<pre><span class='line'>  1</span> <span class="COMM">// /** Module file source_UI/jupytepide.js</span><span
        class="WHIT">
<span class='line'>  2</span> </span><span class="COMM">//  * Edited by: Michał Bednarczyk</span><span class="WHIT">
<span class='line'>  3</span> </span><span class="COMM">//  * Copyright (C) 2017 .....</span><span class="WHIT">
<span class='line'>  4</span> </span><span
        class="COMM">//  * Distributed under the terms of the BSD License.</span><span class="WHIT">
<span class='line'>  5</span> </span><span class="COMM">//  * ---------------------------------------------------------------------------</span><span
        class="WHIT">
<span class='line'>  6</span> </span><span class="COMM">//  * Jupytepide main object</span><span class="WHIT">
<span class='line'>  7</span> </span><span class="COMM">//  */</span><span class="WHIT">
<span class='line'>  8</span> 
<span class='line'>  9</span> </span><span
        class="COMM">//Generowanie dokumentacji:  jsdoc -d=doc jupytepide.js</span><span class="WHIT">
<span class='line'> 10</span> 
<span class='line'> 11</span> </span><span class="COMM">//TODO: dać tu zawartość modułu jupytepide_notebooks</span><span
        class="WHIT">
<span class='line'> 12</span> </span><span class="COMM">//TODO: pospinać jak najwięcej uniwersalnych funkcji z metodami tego obiektu</span><span
        class="WHIT">
<span class='line'> 13</span> 
<span class='line'> 14</span> </span><span class="COMM">//todo:dorobić funkcję deleteAllLAyers - do usuwania wszystkich za pomocą each_Layer (leafleta) - przydatne gdy ktoś nie nada nazw tworzonym warstwom  i nie będzie mógł wywalić...</span><span
        class="WHIT">
<span class='line'> 15</span> </span><span class="COMM">//todo:zrobić, żeby warstwy, które nie dostaną nazwy zostały ponumerowane, np.: Layer 1, itp.</span><span
        class="WHIT">
<span class='line'> 16</span> </span><span class="COMM">//todo:nie pozwalać na wielokrotne dodawanie warstw o tej samej nazwie, bo potem nie chca się dać usunąć</span><span
        class="WHIT">
<span class='line'> 17</span> 
<span class='line'> 18</span> </span><span class="WHIT"> </span><span class="COMM">/**
<span class='line'> 19</span>   * Jupytepide main object.
<span class='line'> 20</span>   * @class Jupytepide
<span class='line'> 21</span>   */</span><span class="WHIT">
<span class='line'> 22</span> </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">Jupytepide</span><span
        class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span
        class="NAME">version</span><span class="PUNC">:</span><span class="STRN">'0.1.alpha'</span><span
        class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 23</span> 
<span class='line'> 24</span> </span><span class="NAME">define</span><span class="PUNC">(</span><span
        class="PUNC">[</span><span class="WHIT">
<span class='line'> 25</span> </span><span class="WHIT">    </span><span class="STRN">'jquery'</span><span class="PUNC">,</span><span
        class="WHIT">
<span class='line'> 26</span> </span><span class="WHIT">    </span><span class="STRN">'base/js/namespace'</span><span
        class="PUNC">,</span><span class="WHIT">
<span class='line'> 27</span> </span><span class="WHIT">    </span><span class="STRN">'base/js/dialog'</span><span
        class="PUNC">,</span><span class="WHIT">
<span class='line'> 28</span> </span><span class="WHIT">    </span><span class="STRN">'base/js/utils'</span><span
        class="PUNC">,</span><span class="WHIT">
<span class='line'> 29</span> </span><span class="WHIT">    </span><span class="STRN">'services/config'</span><span
        class="PUNC">,</span><span class="WHIT">
<span class='line'> 30</span> </span><span class="WHIT">    </span><span class="STRN">'./leaflet_interface'</span><span
        class="WHIT">
<span class='line'> 31</span> </span><span class="PUNC">]</span><span class="PUNC">,</span><span
        class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span
        class="PUNC">(</span><span class="NAME">$</span><span class="PUNC">,</span><span class="WHIT"> </span><span
        class="NAME">Jupyter</span><span class="PUNC">,</span><span class="WHIT"> </span><span
        class="NAME">dialog</span><span class="PUNC">,</span><span class="WHIT"> </span><span
        class="NAME">utils</span><span class="PUNC">,</span><span class="WHIT"> </span><span
        class="NAME">configmod</span><span class="PUNC">,</span><span class="NAME">leaflet_interface</span><span
        class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'> 32</span> </span><span class="WHIT">    </span><span class="STRN">"use strict"</span><span
        class="PUNC">;</span><span class="WHIT">
<span class='line'> 33</span> 
<span class='line'> 34</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='line'> 35</span>      * Sets the map view at provided center point with defined zoom.
<span class='line'> 36</span>      * @example
<span class='line'> 37</span>      * // center=[51,17], zoom=9
<span class='line'> 38</span>      * Jupytepide.map_setView([51,17],9)
<span class='line'> 39</span>      * @method map_setView
<span class='line'> 40</span>      * @param center - An array of two [lat,lon] values.
<span class='line'> 41</span>      * @param zoom - Zoom ratio integer value.
<span class='line'> 42</span>      * @memberof: class:Jupytepide
<span class='line'> 43</span>      */</span><span class="WHIT">
<span class='line'> 44</span> 
<span class='line'> 45</span> </span><span class="WHIT">    </span><span class="NAME">Jupytepide.map_setView</span><span
        class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span
        class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">center</span><span
        class="PUNC">,</span><span class="NAME">zoom</span><span class="PUNC">)</span><span class="PUNC">{</span><span
        class="WHIT">
<span class='line'> 46</span> </span><span class="WHIT">        </span><span
        class="NAME">leaflet_interface.set_view</span><span class="PUNC">(</span><span class="NAME">center</span><span
        class="PUNC">,</span><span class="NAME">zoom</span><span class="PUNC">)</span><span class="PUNC">;</span><span
        class="WHIT">
<span class='line'> 47</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span
        class="PUNC">;</span><span class="WHIT">
<span class='line'> 48</span> 
<span class='line'> 49</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='line'> 50</span>      * Adds a marker into the map.
<span class='line'> 51</span>      * @example
<span class='line'> 52</span>      * // center=[51.11134, 17.0343], popup_={title: 'Wrocław',text:'Miasto w Polsce'}
<span class='line'> 53</span>      * Jupytepide.map_addMarker([51.11134, 17.0343],{title: "Wrocław",text:"Miasto w Polsce"});
<span class='line'> 54</span>      * @param center - An array of two [lat,lon] values.
<span class='line'> 55</span>      * @param popup_ - Content of the popup.
<span class='line'> 56</span>      * @memberof: class:Jupytepide
<span class='line'> 57</span>      */</span><span class="WHIT">
<span class='line'> 58</span> 
<span class='line'> 59</span> </span><span class="WHIT">    </span><span
        class="NAME">Jupytepide.map_addMarker</span><span class="WHIT"> </span><span class="PUNC">=</span><span
        class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span
        class="NAME">center</span><span class="PUNC">,</span><span class="NAME">popup_</span><span class="PUNC">)</span><span
        class="PUNC">{</span><span class="WHIT">
<span class='line'> 60</span> </span><span class="WHIT">        </span><span class="COMM">//todo: zrobić numerowanie markerów (innych elementów też, żeby je można było usuwać</span><span
        class="WHIT">
<span class='line'> 61</span> </span><span class="WHIT">        </span><span class="KEYW">var</span><span
        class="WHIT"> </span><span class="NAME">layer_name</span><span class="PUNC">=</span><span class="STRN">'tmpMarker'</span><span
        class="WHIT">
<span class='line'> 62</span> </span><span class="WHIT">        </span><span class="COMM">//dodaje nową property (object) o nazwie "name" do obiektu leafletMap - w ten sposób warstwa zostaje związana z leafletMap jako obiekt</span><span
        class="WHIT">
<span class='line'> 63</span> </span><span class="WHIT">        </span><span
        class="NAME">Jupytepide.leafletMap.layers</span><span class="PUNC">[</span><span
        class="NAME">layer_name</span><span class="PUNC">]</span><span class="WHIT"> </span><span
        class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">leaflet_interface.add_marker</span><span
        class="PUNC">(</span><span class="NAME">center</span><span class="PUNC">,</span><span class="NAME">popup_</span><span
        class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 64</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span
        class="PUNC">;</span><span class="WHIT">
<span class='line'> 65</span> 
<span class='line'> 66</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='line'> 67</span>      * Adds a circle into the map.
<span class='line'> 68</span>      * The layer name, into which polylane is added is set as "tmpCircle" by default and is not shown in layers list.
<span class='line'> 69</span>      * Refer to this name when you want to delete a circle from map.
<span class='line'> 70</span>      * @example
<span class='line'> 71</span>      * //center=[52.407, 21.33], radius=500, popup_="Some text",
<span class='line'> 72</span>      * //parameters_={color: 'red', fillColor: '#f03', fillOpacity: 0.5}
<span class='line'> 73</span>      * Jupytepide.map_addCircle([52.407, 21.33],500,"Some text",
<span class='line'> 74</span>      *          {color: 'red', fillColor: '#f03', fillOpacity: 0.5});
<span class='line'> 75</span>      * @param center - An array of two [lat,lon] values.
<span class='line'> 76</span>      * @param radius - Circle radius.
<span class='line'> 77</span>      * @param popup_ - Content of the popup.
<span class='line'> 78</span>      * @param parameters_ - Display parameters.
<span class='line'> 79</span>      * @memberof: class:Jupytepide
<span class='line'> 80</span>      */</span><span class="WHIT">
<span class='line'> 81</span> </span><span class="WHIT">    </span><span class="COMM">//center=[52.407, 21.33], radius=500, popup_="Some text", parameters_={color: 'red', fillColor: '#f03', fillOpacity: 0.5}</span><span
        class="WHIT">
<span class='line'> 82</span> </span><span class="WHIT">    </span><span
        class="NAME">Jupytepide.map_addCircle</span><span class="WHIT"> </span><span class="PUNC">=</span><span
        class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span
        class="NAME">center</span><span class="PUNC">,</span><span class="NAME">radius</span><span class="PUNC">,</span><span
        class="NAME">popup_</span><span class="PUNC">,</span><span class="NAME">parameters_</span><span
        class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'> 83</span> </span><span class="WHIT">        </span><span class="KEYW">var</span><span
        class="WHIT"> </span><span class="NAME">layer_name</span><span class="WHIT"> </span><span
        class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'tmpCircle'</span><span class="PUNC">;</span><span
        class="WHIT">
<span class='line'> 84</span> </span><span class="WHIT">        </span><span class="COMM">//dodaje nową property (object) o nazwie "name" do obiektu leafletMap - w ten sposób warstwa zostaje związana z leafletMap jako obiekt</span><span
        class="WHIT">
<span class='line'> 85</span> </span><span class="WHIT">        </span><span
        class="NAME">Jupytepide.leafletMap.layers</span><span class="PUNC">[</span><span
        class="NAME">layer_name</span><span class="PUNC">]</span><span class="WHIT"> </span><span
        class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">leaflet_interface.add_circle</span><span
        class="PUNC">(</span><span class="NAME">center</span><span class="PUNC">,</span><span class="NAME">radius</span><span
        class="PUNC">,</span><span class="NAME">popup_</span><span class="PUNC">,</span><span
        class="NAME">parameters_</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 86</span> 
<span class='line'> 87</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span
        class="PUNC">;</span><span class="WHIT">
<span class='line'> 88</span> 
<span class='line'> 89</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='line'> 90</span>      * Adds a polygon into the map.
<span class='line'> 91</span>      * The layer name, into which polylane is added is set as "tmpPolygon" by default and is not shown in layers list.
<span class='line'> 92</span>      * Refer to this name when you want to delete a polygon from map.
<span class='line'> 93</span>      * @example
<span class='line'> 94</span>      * //points=[[51.1092, 17.06108],[51.10734, 17.06698],[51.10697, 17.06587]],
<span class='line'> 95</span>      * //popup="Some text", parameters_={color: 'red',
<span class='line'> 96</span>      * //                           fillColor: '#f03', fillOpacity: 0.5}
<span class='line'> 97</span>      * Jupytepide.map_addPolygon([[51.1092, 17.06108],[51.10734, 17.06698],[51.10697, 17.06587]],
<span class='line'> 98</span>      *      "tekst",{color: 'red', fillColor: '#f03', fillOpacity: 0.5});
<span class='line'> 99</span>      * @param points - An array of vertex's [lat,lon] coordinates.
<span class='line'>100</span>      * @param popup_ - Content of the popup.
<span class='line'>101</span>      * @param parameters_ - Display parameters.
<span class='line'>102</span>      * @memberof: class:Jupytepide
<span class='line'>103</span>      */</span><span class="WHIT">
<span class='line'>104</span> 
<span class='line'>105</span> </span><span class="WHIT">    </span><span
        class="NAME">Jupytepide.map_addPolygon</span><span class="WHIT"> </span><span class="PUNC">=</span><span
        class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span
        class="NAME">points</span><span class="PUNC">,</span><span class="NAME">popup_</span><span class="PUNC">,</span><span
        class="NAME">parameters_</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>106</span> </span><span class="WHIT">        </span><span class="KEYW">var</span><span
        class="WHIT"> </span><span class="NAME">layer_name</span><span class="WHIT"> </span><span
        class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'tmpPolygon'</span><span
        class="PUNC">;</span><span class="WHIT">
<span class='line'>107</span> </span><span class="WHIT">        </span><span class="COMM">//dodaje nową property (object) o nazwie "name" do obiektu leafletMap - w ten sposób warstwa zostaje związana z leafletMap jako obiekt</span><span
        class="WHIT">
<span class='line'>108</span> </span><span class="WHIT">        </span><span
        class="NAME">Jupytepide.leafletMap.layers</span><span class="PUNC">[</span><span
        class="NAME">layer_name</span><span class="PUNC">]</span><span class="WHIT"> </span><span
        class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">leaflet_interface.add_polygon</span><span
        class="PUNC">(</span><span class="NAME">points</span><span class="PUNC">,</span><span class="NAME">popup_</span><span
        class="PUNC">,</span><span class="NAME">parameters_</span><span class="PUNC">)</span><span class="PUNC">;</span><span
        class="WHIT">
<span class='line'>109</span> 
<span class='line'>110</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span
        class="PUNC">;</span><span class="WHIT">
<span class='line'>111</span> 
<span class='line'>112</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='line'>113</span>      * Adds a polyline into the map.
<span class='line'>114</span>      * The layer name, into which polylane is added is set as "tmpPolyline" by default and is not shown in layers list.
<span class='line'>115</span>      * Refer to this name when you want to delete a polyline from map.
<span class='line'>116</span>      * @example
<span class='line'>117</span>      * //latlngs=[[17.06101,51.1093],[17.06691,51.10739],[17.06581,51.10691]], options={color:'red'}, popup='linijka'
<span class='line'>118</span>      * Jupytepide.map_addPolyline([ [17.06101,51.1093],[17.06691,51.10739],[17.06581,51.10691] ],{color:'red'},'linijka');
<span class='line'>119</span>      * @param latlngs - An array of vertex'es [lat,lon] coordinates.
<span class='line'>120</span>      * @param options - Display parameters.
<span class='line'>121</span>      * @param popup_ - Content of the popup.
<span class='line'>122</span>      * @memberof: class:Jupytepide
<span class='line'>123</span>      */</span><span class="WHIT">
<span class='line'>124</span> </span><span class="WHIT">    </span><span class="COMM">//nazwa warstwy, do której dodana jest polilinia to 'tmpPolyline'. Podana jest na stałe i do tej nazwy należy się odwoływac podczas usuwania</span><span
        class="WHIT">
<span class='line'>125</span> </span><span class="WHIT">    </span><span
        class="NAME">Jupytepide.map_addPolyline</span><span class="WHIT"> </span><span class="PUNC">=</span><span
        class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span
        class="NAME">latlngs</span><span class="PUNC">,</span><span class="NAME">options</span><span
        class="PUNC">,</span><span class="NAME">popup_</span><span class="PUNC">)</span><span class="PUNC">{</span><span
        class="WHIT">
<span class='line'>126</span> </span><span class="WHIT">        </span><span class="KEYW">var</span><span
        class="WHIT"> </span><span class="NAME">layer_name</span><span class="PUNC">=</span><span class="STRN">'tmpPolyline'</span><span
        class="PUNC">;</span><span class="WHIT">
<span class='line'>127</span> </span><span class="WHIT">        </span><span class="COMM">//dodaje nową property (object) o nazwie "name" do obiektu leafletMap - w ten sposób warstwa zostaje związana z leafletMap jako obiekt</span><span
        class="WHIT">
<span class='line'>128</span> </span><span class="WHIT">        </span><span
        class="NAME">Jupytepide.leafletMap.layers</span><span class="PUNC">[</span><span
        class="NAME">layer_name</span><span class="PUNC">]</span><span class="WHIT"> </span><span
        class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">leaflet_interface.add_polyline</span><span
        class="PUNC">(</span><span class="NAME">latlngs</span><span class="PUNC">,</span><span
        class="NAME">options</span><span class="PUNC">,</span><span class="NAME">popup_</span><span
        class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>129</span> 
<span class='line'>130</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span
        class="PUNC">;</span><span class="WHIT">
<span class='line'>131</span> 
<span class='line'>132</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='line'>133</span>      * Adds a WMS layer into the map.
<span class='line'>134</span>      * @example
<span class='line'>135</span>      * Jupytepide.map_addWmsLayer(
<span class='line'>136</span>      *   'http://mapy.geoportal.gov.pl/wss/service/img/guest/Administracyjna/MapServer/WMSServer',
<span class='line'>137</span>      *   {layers:'Administracyjna', opacity:1},'Administracyjna');
<span class='line'>138</span>      * @example
<span class='line'>139</span>      * Jupytepide.map_addWmsLayer(
<span class='line'>140</span>      *  'http://mapy.geoportal.gov.pl/wss/service/pub/guest/kompozycjaG2_VMAPL2_WMS/MapServer/WMSServer',
<span class='line'>141</span>      *  {layers:'Jezdnia_dr_gl_L,Jezdnia_dr_zb_L,Jezdnia_drogi_eksp_L',
<span class='line'>142</span>      *   opacity:1, transparent:'true',format:'image/png'},'drogi');
<span class='line'>143</span>      * @param url_ - URL of WMS service.
<span class='line'>144</span>      * @param attrib - WMS attributes.
<span class='line'>145</span>      * @param layer_name - Jupytepide (not WMS) layer name, which will appear on the layers list after loading.
<span class='line'>146</span>      * @memberof: class:Jupytepide
<span class='line'>147</span>      */</span><span class="WHIT">
<span class='line'>148</span> 
<span class='line'>149</span> </span><span class="WHIT">    </span><span class="COMM">//example: url='https://demo.boundlessgeo.com/geoserver/ows?', atrib={layers:'ne:ne'}, more options: http://leafletjs.com/reference-1.3.0.html#tilelayer-wms</span><span
        class="WHIT">
<span class='line'>150</span> </span><span class="WHIT">    </span><span
        class="NAME">Jupytepide.map_addWmsLayer</span><span class="WHIT"> </span><span class="PUNC">=</span><span
        class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">url_</span><span
        class="PUNC">,</span><span class="NAME">attrib</span><span class="PUNC">,</span><span
        class="NAME">layer_name</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>151</span> </span><span class="WHIT">        </span><span class="COMM">//dodaje nową property (object) o nazwie "name" do obiektu leafletMap - w ten sposób warstwa zostaje związana z leafletMap jako obiekt</span><span
        class="WHIT">
<span class='line'>152</span> </span><span class="WHIT">        </span><span
        class="NAME">Jupytepide.leafletMap.layers</span><span class="PUNC">[</span><span
        class="NAME">layer_name</span><span class="PUNC">]</span><span class="WHIT"> </span><span
        class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">leaflet_interface.load_wmsLayer</span><span
        class="PUNC">(</span><span class="NAME">url_</span><span class="PUNC">,</span><span
        class="NAME">attrib</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>153</span> </span><span class="WHIT">        </span><span class="COMM">//dodaje do control.layers (do menu z checkboxem)</span><span
        class="WHIT">
<span class='line'>154</span> </span><span class="WHIT">        </span><span class="NAME">Jupytepide.leafletMap.control.addOverlay</span><span
        class="PUNC">(</span><span class="NAME">Jupytepide.leafletMap.layers</span><span class="PUNC">[</span><span
        class="NAME">layer_name</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">layer_name</span><span
        class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>155</span> </span><span class="WHIT">     </span><span class="PUNC">}</span><span
        class="PUNC">;</span><span class="WHIT">
<span class='line'>156</span> 
<span class='line'>157</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='line'>158</span>      * Adds a TMS (tiled) layer into the map.
<span class='line'>159</span>      * @example
<span class='line'>160</span>      * //url='/nbextensions/source_UI/madrid/{z}/{x}/{y}.png'
<span class='line'>161</span>      * Jupytepide.map_addTileLayer('http://localhost:8888/tree/aa_notebooks/madrid/{z}/{x}/{y}.png',
<span class='line'>162</span>      *   {maxZoom:20,attribution:"",tms:true},"madrid");
<span class='line'>163</span>      * @param url_ - URL of TMS service od catalog.
<span class='line'>164</span>      * @param attrib - TMS attributes.
<span class='line'>165</span>      * @param layer_name - Jupytepide (not TMS) layer name, which will appear on the layers list after loading.
<span class='line'>166</span>      * @memberof: class:Jupytepide
<span class='line'>167</span>      */</span><span class="WHIT">
<span class='line'>168</span> 
<span class='line'>169</span> </span><span class="WHIT">    </span><span class="COMM">//example:  url_='https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw',</span><span
        class="WHIT">
<span class='line'>170</span> </span><span class="WHIT">    </span><span class="COMM">//          attrib={maxZoom:18,attribution:"",id:'mapbox.streets'},</span><span
        class="WHIT">
<span class='line'>171</span> </span><span class="WHIT">    </span><span class="COMM">//          layer_name="Layer name"</span><span
        class="WHIT">
<span class='line'>172</span> </span><span class="WHIT">    </span><span class="COMM">//example2: url='/nbextensions/source_UI/madrid/{z}/{x}/{y}.png' - own (local) tile layer</span><span
        class="WHIT">
<span class='line'>173</span> </span><span class="WHIT">    </span><span class="NAME">Jupytepide.map_addTileLayer</span><span
        class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span
        class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">url_</span><span class="PUNC">,</span><span
        class="NAME">attrib</span><span class="PUNC">,</span><span class="NAME">layer_name</span><span
        class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>174</span> </span><span class="WHIT">        </span><span class="COMM">//dodaje nową property (object) o nazwie "name" do obiektu leafletMap - w ten sposób warstwa zostaje związana z leafletMap jako obiekt</span><span
        class="WHIT">
<span class='line'>175</span> </span><span class="WHIT">        </span><span
        class="NAME">Jupytepide.leafletMap.layers</span><span class="PUNC">[</span><span
        class="NAME">layer_name</span><span class="PUNC">]</span><span class="WHIT"> </span><span
        class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">leaflet_interface.load_tileLayer</span><span
        class="PUNC">(</span><span class="NAME">url_</span><span class="PUNC">,</span><span
        class="NAME">attrib</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>176</span> </span><span class="WHIT">        </span><span class="COMM">//dodaje do control.layers (do menu z checkboxem)</span><span
        class="WHIT">
<span class='line'>177</span> </span><span class="WHIT">        </span><span class="NAME">Jupytepide.leafletMap.control.addOverlay</span><span
        class="PUNC">(</span><span class="NAME">Jupytepide.leafletMap.layers</span><span class="PUNC">[</span><span
        class="NAME">layer_name</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">layer_name</span><span
        class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>178</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span
        class="PUNC">;</span><span class="WHIT">
<span class='line'>179</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='line'>180</span>      * Adds a GEOJSON vector layer into the map.
<span class='line'>181</span>      * The simple example is provided here, but there are much more possibilities of usage.
<span class='line'>182</span>      * Jupytepide leaflet-based map uses [lat,lon] while GEOJSON uses [lon,lat] coordinates.
<span class='line'>183</span>      * More at: &lt;a href="http://leafletjs.com/examples/geojson/">http://leafletjs.com/examples/geojson/&lt;/a>
<span class='line'>184</span>      * @example
<span class='line'>185</span>      * //first GEOJSON feature
<span class='line'>186</span>      * var geojsonFeature ={
<span class='line'>187</span>      * "type": "Feature",
<span class='line'>188</span>      * "geometry": {
<span class='line'>189</span>      * "type": "Polygon",
<span class='line'>190</span>      * "coordinates": [[ [17.06101,51.1093],[17.06691,51.10739],[17.06581,51.10691] ]]
<span class='line'>191</span>      * },
<span class='line'>192</span>      * "properties": {
<span class='line'>193</span>      * "description": "value0",
<span class='line'>194</span>      * "prop1": {"this": "that"}
<span class='line'>195</span>      * }
<span class='line'>196</span>      * };
<span class='line'>197</span>      *
<span class='line'>198</span>      * //Then loading into map
<span class='line'>199</span>      * Jupytepide.map_addGeoJsonLayer(geojsonFeature,"GEOJSON")
<span class='line'>200</span>      * @example
<span class='line'>201</span>      * //Or, when one wants to set up some display parameters
<span class='line'>202</span>      * var myStyle = {"color": "#ff7800", "weight": 5, "opacity": 0.65};
<span class='line'>203</span>      * Jupytepide.map_addGeoJsonLayer(geojsonFeature,"GEOJSON",{style: myStyle});
<span class='line'>204</span>      * @param data - GEOJSON vector map data
<span class='line'>205</span>      * @param layer_name - Jupytepide (not GEOJSON) layer name, which will appear on the layers list after loading.
<span class='line'>206</span>      * @param options - Display options.
<span class='line'>207</span>      * @memberof: class:Jupytepide
<span class='line'>208</span>      */</span><span class="WHIT">
<span class='line'>209</span> 
<span class='line'>210</span> </span><span class="WHIT">    </span><span
        class="NAME">Jupytepide.map_addGeoJsonLayer</span><span class="WHIT"> </span><span class="PUNC">=</span><span
        class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">data</span><span
        class="PUNC">,</span><span class="NAME">layer_name</span><span class="PUNC">,</span><span
        class="NAME">options</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>211</span> </span><span class="WHIT">        </span><span class="NAME">options</span><span
        class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="KEYW">null</span><span
        class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="PUNC">{</span><span
        class="PUNC">}</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span
        class="NAME">options</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>212</span> </span><span class="WHIT">        </span><span class="COMM">//dodaje nową property (object) o nazwie "name" do obiektu leafletMap - w ten sposób warstwa zostaje związana z leafletMap jako obiekt</span><span
        class="WHIT">
<span class='line'>213</span> </span><span class="WHIT">        </span><span
        class="NAME">Jupytepide.leafletMap.layers</span><span class="PUNC">[</span><span
        class="NAME">layer_name</span><span class="PUNC">]</span><span class="WHIT"> </span><span
        class="PUNC">=</span><span class="WHIT"> </span><span
        class="NAME">leaflet_interface.load_geoJsonLayer</span><span class="PUNC">(</span><span class="NAME">data</span><span
        class="PUNC">,</span><span class="NAME">options</span><span class="PUNC">)</span><span
        class="PUNC">;</span><span class="WHIT">
<span class='line'>214</span> </span><span class="WHIT">        </span><span class="COMM">//dodaje do control.layers (do menu z checkboxem)</span><span
        class="WHIT">
<span class='line'>215</span> </span><span class="WHIT">        </span><span class="NAME">Jupytepide.leafletMap.control.addOverlay</span><span
        class="PUNC">(</span><span class="NAME">Jupytepide.leafletMap.layers</span><span class="PUNC">[</span><span
        class="NAME">layer_name</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">layer_name</span><span
        class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>216</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span
        class="PUNC">;</span><span class="WHIT">
<span class='line'>217</span> 
<span class='line'>218</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='line'>219</span>      * Adds an image raster layer into the map.
<span class='line'>220</span>      * It won't work with geotif. For geotif use "map_addTileLayer" method.
<span class='line'>221</span>      * @example
<span class='line'>222</span>      * //imageUrl = '/nbextensions/source_UI/img/raster-1.jpg',
<span class='line'>223</span>      * //imageBounds = [[51.712216, 17.22655], [51.773941, 17.12544]];
<span class='line'>224</span>      * Jupytepide.map_addImageLayer(
<span class='line'>225</span>      * 		'/nbextensions/source_UI/img/raster-1.jpg',
<span class='line'>226</span>      * 		[[51.712216, 17.22655], [51.773941, 17.12544]];
<span class='line'>227</span>      * 		{opacity: 0.5});
<span class='line'>228</span>      * @param imageUrl - URL of raster image.
<span class='line'>229</span>      * @param imageBounds - Bounding coordinates of image in [lat,lon].
<span class='line'>230</span>      * @param layer_name - Jupytepide layer name, which will appear on the layers list after loading.
<span class='line'>231</span>      * @param options - Display options.
<span class='line'>232</span>      * @memberof: class:Jupytepide
<span class='line'>233</span>      */</span><span class="WHIT">
<span class='line'>234</span> </span><span class="WHIT">    </span><span
        class="NAME">Jupytepide.map_addImageLayer</span><span class="WHIT"> </span><span class="PUNC">=</span><span
        class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span
        class="NAME">imageUrl</span><span class="PUNC">,</span><span class="NAME">imageBounds</span><span
        class="PUNC">,</span><span class="NAME">layer_name</span><span class="PUNC">,</span><span
        class="NAME">options</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>235</span> </span><span class="WHIT">        </span><span class="NAME">options</span><span
        class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="KEYW">null</span><span
        class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="PUNC">{</span><span
        class="PUNC">}</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span
        class="NAME">options</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>236</span> </span><span class="WHIT">        </span><span class="COMM">//dodaje nową property (object) o nazwie "name" do obiektu leafletMap - w ten sposób warstwa zostaje związana z leafletMap jako obiekt</span><span
        class="WHIT">
<span class='line'>237</span> </span><span class="WHIT">        </span><span
        class="NAME">Jupytepide.leafletMap.layers</span><span class="PUNC">[</span><span
        class="NAME">layer_name</span><span class="PUNC">]</span><span class="WHIT"> </span><span
        class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">leaflet_interface.load_imageLayer</span><span
        class="PUNC">(</span><span class="NAME">imageUrl</span><span class="PUNC">,</span><span
        class="NAME">imageBounds</span><span class="PUNC">,</span><span class="NAME">options</span><span
        class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>238</span> </span><span class="WHIT">        </span><span class="COMM">//dodaje do control.layers (do menu z checkboxem)</span><span
        class="WHIT">
<span class='line'>239</span> </span><span class="WHIT">        </span><span class="NAME">Jupytepide.leafletMap.control.addOverlay</span><span
        class="PUNC">(</span><span class="NAME">Jupytepide.leafletMap.layers</span><span class="PUNC">[</span><span
        class="NAME">layer_name</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">layer_name</span><span
        class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>240</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span
        class="PUNC">;</span><span class="WHIT">
<span class='line'>241</span> 
<span class='line'>242</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='line'>243</span>      * Removes layer given by the "layer_name" from the map.
<span class='line'>244</span>      * @example
<span class='line'>245</span>      * //To remove layer named "tmpPolyline", call:
<span class='line'>246</span>      * Jupytepide.map_removeLayer('tmpPolyline');
<span class='line'>247</span>      * @param layer_name
<span class='line'>248</span>      * @memberof: class:Jupytepide
<span class='line'>249</span>      */</span><span class="WHIT">
<span class='line'>250</span> </span><span class="WHIT">    </span><span
        class="COMM">//*** map_removeLayer ***</span><span class="WHIT">
<span class='line'>251</span> </span><span class="WHIT">    </span><span
        class="NAME">Jupytepide.map_removeLayer</span><span class="WHIT"> </span><span class="PUNC">=</span><span
        class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span
        class="NAME">layer_name</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>252</span> </span><span class="WHIT">        </span><span class="COMM">//remove layer from leaflet component</span><span
        class="WHIT">
<span class='line'>253</span> </span><span class="WHIT">        </span><span
        class="NAME">Jupytepide.leafletMap.layers</span><span class="PUNC">[</span><span
        class="NAME">layer_name</span><span class="PUNC">]</span><span class="PUNC">.</span><span
        class="NAME">remove</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span
        class="WHIT">
<span class='line'>254</span> </span><span class="WHIT">        </span><span class="COMM">//remove layer from control.layers</span><span
        class="WHIT">
<span class='line'>255</span> </span><span class="WHIT">        </span><span class="NAME">Jupytepide.leafletMap.control.removeLayer</span><span
        class="PUNC">(</span><span class="NAME">Jupytepide.leafletMap.layers</span><span class="PUNC">[</span><span
        class="NAME">layer_name</span><span class="PUNC">]</span><span class="PUNC">)</span><span
        class="PUNC">;</span><span class="WHIT">
<span class='line'>256</span> </span><span class="WHIT">        </span><span
        class="COMM">//remove layer from Jupytepide</span><span class="WHIT">
<span class='line'>257</span> </span><span class="WHIT">        </span><span class="KEYW">delete</span><span
        class="WHIT"> </span><span class="NAME">Jupytepide.leafletMap.layers</span><span class="PUNC">[</span><span
        class="NAME">layer_name</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>258</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span
        class="PUNC">;</span><span class="WHIT">
<span class='line'>259</span> 
<span class='line'>260</span> </span><span class="WHIT">    </span><span
        class="NAME">Jupytepide.map_addLayerControls</span><span class="WHIT"> </span><span class="PUNC">=</span><span
        class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span
        class="NAME">baseLayers</span><span class="PUNC">,</span><span class="NAME">overlays</span><span
        class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>261</span> </span><span class="WHIT">        </span><span
        class="NAME">Jupytepide.leafletMap.control</span><span class="WHIT"> </span><span class="PUNC">=</span><span
        class="WHIT"> </span><span class="NAME">leaflet_interface.add_layerControls</span><span
        class="PUNC">(</span><span class="NAME">baseLayers</span><span class="PUNC">,</span><span
        class="NAME">overlays</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>262</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span
        class="PUNC">;</span><span class="WHIT">
<span class='line'>263</span> 
<span class='line'>264</span> 
<span class='line'>265</span> </span><span class="WHIT">    </span><span
        class="NAME">Jupytepide.map_addControlBaseLayer</span><span class="WHIT"> </span><span
        class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span
        class="PUNC">(</span><span class="NAME">Layer</span><span class="PUNC">,</span><span
        class="NAME">name</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>266</span> </span><span class="WHIT">        </span><span class="COMM">//Jupytepide.leafletMap.control.addBaseLayer(Layer,name);</span><span
        class="WHIT">
<span class='line'>267</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span
        class="PUNC">;</span><span class="WHIT">
<span class='line'>268</span> 
<span class='line'>269</span> </span><span class="WHIT">    </span><span class="NAME">Jupytepide.map_addControlOverlayLayer</span><span
        class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span
        class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">Layer</span><span
        class="PUNC">,</span><span class="NAME">name</span><span class="PUNC">)</span><span class="PUNC">{</span><span
        class="WHIT">
<span class='line'>270</span> </span><span class="WHIT">        </span><span class="COMM">//Jupytepide.leafletMap.control.addOverlay(Layer,name);</span><span
        class="WHIT">
<span class='line'>271</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span
        class="PUNC">;</span><span class="WHIT">
<span class='line'>272</span> 
<span class='line'>273</span> </span><span class="WHIT">    </span><span class="NAME">Jupytepide.load_image</span><span
        class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span
        class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span
        class="PUNC">{</span><span class="WHIT">
<span class='line'>274</span> </span><span class="WHIT">        </span><span
        class="NAME">leaflet_interface.load_image</span><span class="PUNC">(</span><span class="PUNC">)</span><span
        class="PUNC">;</span><span class="WHIT">
<span class='line'>275</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span
        class="PUNC">;</span><span class="WHIT">
<span class='line'>276</span> 
<span class='line'>277</span> </span><span class="WHIT">    </span><span class="COMM">//*** testing area ***</span><span
        class="WHIT">
<span class='line'>278</span> </span><span class="WHIT">    </span><span class="NAME">Jupytepide.load_madrid</span><span
        class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span
        class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span
        class="PUNC">{</span><span class="WHIT">
<span class='line'>279</span> </span><span class="WHIT">        </span><span class="KEYW">var</span><span
        class="WHIT"> </span><span class="NAME">layer_name</span><span class="WHIT"> </span><span
        class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"Madryt"</span><span
        class="PUNC">;</span><span class="WHIT">
<span class='line'>280</span> </span><span class="WHIT">        </span><span class="COMM">//dodaje nową property (object) o nazwie "name" do obiektu leafletMap - w ten sposób warstwa zostaje związana z leafletMap jako obiekt</span><span
        class="WHIT">
<span class='line'>281</span> </span><span class="WHIT">        </span><span
        class="NAME">Jupytepide.leafletMap.layers</span><span class="PUNC">[</span><span
        class="NAME">layer_name</span><span class="PUNC">]</span><span class="WHIT"> </span><span
        class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">leaflet_interface.load_madrid</span><span
        class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>282</span> </span><span class="WHIT">        </span><span class="COMM">//dodaje do control.layers (do menu z checkboxem)</span><span
        class="WHIT">
<span class='line'>283</span> </span><span class="WHIT">        </span><span class="NAME">Jupytepide.leafletMap.control.addOverlay</span><span
        class="PUNC">(</span><span class="NAME">Jupytepide.leafletMap.layers</span><span class="PUNC">[</span><span
        class="NAME">layer_name</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">layer_name</span><span
        class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>284</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span
        class="PUNC">;</span><span class="WHIT">
<span class='line'>285</span> 
<span class='line'>286</span> </span><span class="WHIT">    </span><span class="COMM">//method for testing</span><span
        class="WHIT">
<span class='line'>287</span> </span><span class="WHIT">    </span><span
        class="NAME">Jupytepide.map_LoadPolygon</span><span class="WHIT"> </span><span class="PUNC">=</span><span
        class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span
        class="NAME">popupText</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>288</span> </span><span class="WHIT">        </span><span class="NAME">leaflet_interface.load_test_polygon</span><span
        class="PUNC">(</span><span class="NAME">popupText</span><span class="PUNC">)</span><span
        class="PUNC">;</span><span class="WHIT">
<span class='line'>289</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span
        class="PUNC">;</span><span class="WHIT">
<span class='line'>290</span> 
<span class='line'>291</span> </span><span class="WHIT">    </span><span
        class="COMM">// return public object</span><span class="WHIT">
<span class='line'>292</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span
        class="WHIT"> </span><span class="NAME">Jupytepide</span><span class="WHIT">
<span class='line'>293</span> 
<span class='line'>294</span> </span><span class="PUNC">}</span><span class="PUNC">)</span><span
        class="PUNC">;</span></pre>
</body>
</html>